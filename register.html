<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register for The Daily Grind</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <img src="logo.jpg" alt="The Daily Grind Logo" class="logo">
            <nav>
                <a href="index.html">Home</a>
                <a href="houseblend.html">House Blend</a>
                <a href="poll.html">Poll</a>
                <a href="#">Shop Online</a>
                <a href="contact.html">Contact Us</a>
                <a href="#">About Us</a>
                <a href="sitemap.html">Site Map</a>
                <a href="register.html">Register</a>
                <a href="login.html">Login</a>
            </nav>
        </header>

        <main>
            <h1>Register for The Daily Grind</h1>
            
            <div class="form-container">
                <form id="registrationForm" action="#" method="POST"> <!-- action="#" means form will submit to itself -->
                    <div class="form-group">
                        <label for="username">Username:</label>
                        <input type="text" id="username" name="username" required>
                        <span id="username_error" class="error-message"></span>
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required>
                        <span id="email_error" class="error-message"></span>
                    </div>
                    <div class="form-group">
                        <label for="password">Password:</label>
                        <input type="password" id="password" name="password" required>
                        <span id="password_error" class="error-message"></span>
                    </div>
                    <div class="form-group">
                        <label for="confirm_password">Confirm Password:</label>
                        <input type="password" id="confirm_password" name="confirm_password" required>
                        <span id="confirm_password_error" class="error-message"></span>
                    </div>
                    <div class="form-group">
                        <label for="security_question_1">Security Question 1:</label>
                        <select id="security_question_1" name="security_question_1" required>
                            <option value="">Select a question</option>
                            <option value="What is your mother's maiden name?">What is your mother's maiden name?</option>
                            <option value="What was the name of your first pet?">What was the name of your first pet?</option>
                            <option value="What city were you born in?">What city were you born in?</option>
                            <option value="What is your favorite color?">What is your favorite color?</option>
                        </select>
                        <span id="security_question_1_error" class="error-message"></span>
                    </div>
                    <div class="form-group">
                        <label for="security_answer_1">Answer 1:</label>
                        <input type="text" id="security_answer_1" name="security_answer_1" required>
                        <span id="security_answer_1_error" class="error-message"></span>
                    </div>
                    <div class="form-group">
                        <label for="security_question_2">Security Question 2:</label>
                        <select id="security_question_2" name="security_question_2" required>
                            <option value="">Select a question</option>
                            <option value="What is your favorite book?">What is your favorite book?</option>
                            <option value="What was your first car?">What was your first car?</option>
                            <option value="What is your favorite movie?">What is your favorite movie?</option>
                            <option value="What is your dream vacation destination?">What is your dream vacation destination?</option>
                        </select>
                        <span id="security_question_2_error" class="error-message"></span>
                    </div>
                    <div class="form-group">
                        <label for="security_answer_2">Answer 2:</label>
                        <input type="text" id="security_answer_2" name="security_answer_2" required>
                        <span id="security_answer_2_error" class="error-message"></span>
                    </div>
                    <div class="button-group">
                        <button type="submit" class="btn">Register</button>
                        <button type="reset" class="btn btn-secondary">Reset Form</button>
                    </div>
                </form>
                <div id="form-message" class="message-box" style="display: none;"></div>
            </div>
            
            <p class="mt-4 text-gray-600">Already have an account? <a href="login.html" class="link-text">Login here</a>.</p>
            <p class="mt-2 text-gray-600"><a href="index.html" class="link-text">Back to Home</a></p>
        </main>
    </div>

    <footer>
        <p id="current-datetime"></p> <!-- Placeholder for current date and time -->
        <p>&copy; 2023 The Daily Grind Coffee House. All rights reserved.</p>
    </footer>

    <script>
        // JavaScript to add the current date and time from server to the footer
        document.addEventListener('DOMContentLoaded', function() {
            const datetimeElement = document.getElementById('current-datetime');
            if (datetimeElement) {
                fetch('get_datetime.php')
                    .then(response => response.text())
                    .then(data => {
                        datetimeElement.textContent = data;
                    })
                    .catch(error => {
                        console.error('Error fetching date and time:', error);
                        datetimeElement.textContent = 'Date and time unavailable.';
                    });
            }

            // Registration Form Validation
            const registrationForm = document.getElementById('registrationForm');
            const usernameInput = document.getElementById('username');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirm_password');
            const securityQuestion1Select = document.getElementById('security_question_1');
            const securityAnswer1Input = document.getElementById('security_answer_1');
            const securityQuestion2Select = document.getElementById('security_question_2');
            const securityAnswer2Input = document.getElementById('security_answer_2');
            const formMessage = document.getElementById('form-message');

            const usernameError = document.getElementById('username_error');
            const emailError = document.getElementById('email_error');
            const passwordError = document.getElementById('password_error');
            const confirmPasswordError = document.getElementById('confirm_password_error');
            const securityQuestion1Error = document.getElementById('security_question_1_error');
            const securityAnswer1Error = document.getElementById('security_answer_1_error');
            const securityQuestion2Error = document.getElementById('security_question_2_error');
            const securityAnswer2Error = document.getElementById('security_answer_2_error');

            function showMessage(message, type) {
                formMessage.textContent = message;
                formMessage.className = `message-box ${type}`;
                formMessage.style.display = 'block';
            }

            function validateField(inputElement, errorElement, errorMessage) {
                if (inputElement.value.trim() === '') {
                    inputElement.classList.add('invalid');
                    errorElement.textContent = errorMessage;
                    return false;
                } else {
                    inputElement.classList.remove('invalid');
                    errorElement.textContent = '';
                    return true;
                }
            }

            function validateEmail(inputElement, errorElement, errorMessage) {
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(inputElement.value.trim())) {
                    inputElement.classList.add('invalid');
                    errorElement.textContent = errorMessage;
                    return false;
                } else {
                    inputElement.classList.remove('invalid');
                    errorElement.textContent = '';
                    return true;
                }
            }

            function validatePassword(passwordInput, passwordError) {
                const password = passwordInput.value;
                let isValid = true;
                let messages = [];

                if (password.length < 8) {
                    messages.push('Password must be at least 8 characters long.');
                    isValid = false;
                }
                if (!/[A-Z]/.test(password)) {
                    messages.push('Password must contain at least one uppercase letter.');
                    isValid = false;
                }
                if (!/[a-z]/.test(password)) {
                    messages.push('Password must contain at least one lowercase letter.');
                    isValid = false;
                }
                if (!/[0-9]/.test(password)) {
                    messages.push('Password must contain at least one number.');
                    isValid = false;
                }
                if (!/[^A-Za-z0-9]/.test(password)) {
                    messages.push('Password must contain at least one special character.');
                    isValid = false;
                }

                if (!isValid) {
                    passwordInput.classList.add('invalid');
                    passwordError.innerHTML = messages.join('<br>'); // Display all messages
                } else {
                    passwordInput.classList.remove('invalid');
                    passwordError.textContent = '';
                }
                return isValid;
            }

            registrationForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent default form submission

                let isValid = true;
                formMessage.style.display = 'none'; // Hide previous messages

                // Validate all fields
                if (!validateField(usernameInput, usernameError, 'Username is required.')) isValid = false;
                if (!validateEmail(emailInput, emailError, 'Please enter a valid email address.')) isValid = false;
                if (!validatePassword(passwordInput, passwordError)) isValid = false;

                // Validate password confirmation
                if (passwordInput.value !== confirmPasswordInput.value) {
                    confirmPasswordInput.classList.add('invalid');
                    confirmPasswordError.textContent = 'Passwords do not match.';
                    isValid = false;
                } else {
                    confirmPasswordInput.classList.remove('invalid');
                    confirmPasswordError.textContent = '';
                }

                if (!validateField(securityQuestion1Select, securityQuestion1Error, 'Please select a security question.')) isValid = false;
                if (!validateField(securityAnswer1Input, securityAnswer1Error, 'Security Answer 1 is required.')) isValid = false;
                if (!validateField(securityQuestion2Select, securityQuestion2Error, 'Please select a security question.')) isValid = false;
                if (!validateField(securityAnswer2Input, securityAnswer2Error, 'Security Answer 2 is required.')) isValid = false;

                if (isValid) {
                    showMessage('Registration form validated successfully!', 'success');
                    // In a real application, you would send the form data to a server here
                    // registrationForm.submit(); // Uncomment to actually submit the form after validation
                } else {
                    showMessage('Please correct the errors in the form.', 'error');
                }
            });

            registrationForm.addEventListener('reset', function(event) {
                // Clear all input fields and error messages
                usernameInput.value = '';
                emailInput.value = '';
                passwordInput.value = '';
                confirmPasswordInput.value = '';
                securityQuestion1Select.value = '';
                securityAnswer1Input.value = '';
                securityQuestion2Select.value = '';
                securityAnswer2Input.value = '';

                usernameInput.classList.remove('invalid');
                emailInput.classList.remove('invalid');
                passwordInput.classList.remove('invalid');
                confirmPasswordInput.classList.remove('invalid');
                securityQuestion1Select.classList.remove('invalid');
                securityAnswer1Input.classList.remove('invalid');
                securityQuestion2Select.classList.remove('invalid');
                securityAnswer2Input.classList.remove('invalid');

                usernameError.textContent = '';
                emailError.textContent = '';
                passwordError.textContent = '';
                confirmPasswordError.textContent = '';
                securityQuestion1Error.textContent = '';
                securityAnswer1Error.textContent = '';
                securityQuestion2Error.textContent = '';
                securityAnswer2Error.textContent = '';

                formMessage.style.display = 'none';
                formMessage.textContent = '';
            });
        });
    </script>
</body>
</html>
