<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - The Daily Grind</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <img src="logo.jpg" alt="The Daily Grind Logo" class="logo">
        <nav class="main-nav">
            <a href="index.html">Home</a>
            <a href="houseblend.html">House Blend</a>
            <a href="contact.html">Contact Us</a>
            <a href="sitemap.html">Site Map</a>
            <a href="register.html">Registration</a>
        </nav>
    </header>

    <main class="container">
        <h1>Contact Us</h1>
        <p>We'd love to hear from you! Please fill out the form below and we'll get back to you as soon as possible.</p>
        
        <form id="contactForm" class="contact-form" action="#" method="post">
            <div id="form-feedback" class="form-feedback"></div>
            <div class="form-group">
                <label for="fname">First Name:</label>
                <input type="text" id="fname" name="firstname" required>
            </div>
            <div class="form-group">
                <label for="lname">Last Name:</label>
                <input type="text" id="lname" name="lastname" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="comments">Comments:</label>
                <textarea id="comments" name="comments" rows="5"></textarea>
            </div>
            <div class="form-group">
                <span>
                    <button type="submit" class="button">Submit</button>
                    <button type="button" class="button button-secondary" onclick="document.getElementById('contactForm').reset();">Reset</button>
                </span>
            </div>
        </form>
    </main>

    <footer>
        <p id="current-date"></p>
    </footer>

    <script>
        // Step 3: Add JavaScript to handle form submission with AJAX
        document.getElementById('contactForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the default form submission

            const form = event.target;
            const formData = new FormData(form);
            const feedbackDiv = document.getElementById('form-feedback');

            // Basic client-side validation
            const email = formData.get('email');
            if (!email || !email.includes('@')) {
                feedbackDiv.textContent = 'Please enter a valid email address.';
                return;
            }

            // This fetch call assumes a PHP script named 'contact_processor.php' on your server
            fetch('contact_processor.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json()) // Assumes server responds with JSON
            .then(data => {
                if (data.success) {
                    feedbackDiv.style.color = 'green';
                    feedbackDiv.textContent = 'Thank you for your feedback! A confirmation has been sent to your email.';
                    form.reset(); // Clear the form
                } else {
                    feedbackDiv.style.color = 'red';
                    feedbackDiv.textContent = 'An error occurred. Please try again later.';
                }
            })
            .catch(error => {
                console.error('Error submitting form:', error);
                feedbackDiv.style.color = 'red';
                feedbackDiv.textContent = 'An error occurred. Please try again later.';
            });
        });
    </script>
</body>
</html>
